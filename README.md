# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание состояний страницы
Каталог - "главная страница" проекта, отрисовывается сразу и без условий. Выведены все имеющиеся в наличии товары. Для каждого товара указано: название, категория, изображение, стоимость.
Установлены слушатели событий на всех карточках товара (при нажатии открывается попап) и на кнопке корзины (при нажатии открывается попап корзины)

Открытая карта товара - открывается в виде попапа при нажатии на конкретный товар. Содержит данные: название, описание, категория, изображение, стоимость и кнопку "купить".

Корзина - открывается в виде попапа в двух случаях - нажатие на иконку корзины или нажатие на кнопку коризину внутри попапа "открытая карта товара". Содержит нумерованный список товаров с названием и ценой, подсчётом общей стоимости. Позволяет удалять отдельные товары из корзины и перейти к модальному окну "данные для оплаты"

Данные для оплаты - два последовательный модальных окна, где попарно размещены формы для заполнения. Только корректно и полностью заполненная форма позволяет перейти к следующей форме. После заполнения обеих форм открывается попап "успешно"

Заказ оформлен - открывается только при корректном заполнении обеих форм данных оплаты, отображает необходимую информацию и последнее состояние суммы в корзине. Закрывается при нажатии на кнопку "за новыми покупками" (кроме обычных закрытий для всех модальных окон при нажатии на оверлей и на кнопку закрытия)

## Список используемых классов (кратко)
Класс "GetDataFromApi" - получение данных карточек товаров с апи
Класс "Product" - хранение данных карточек
Класс "Catalog" - создание экземпляров всех карточек и отрисовка главной страницы
Класс "Modal" - общий родительский класс, отвечает за базовую логику работы модальных окон. Родитель для "ModalCardFull", "Basket", "ModalSuccess", "ModalOrder"
Класс "ModalCardFull" - создание и отрисовка попапа карточки товара
Класс "Basket" - хранение данных корзины и отрисовка
Класс "ModalOrder" - создание, отрисовка и валидация форм оформления заказа
Класс "ModalSuccess" - создание и отрисовка сообщения об успешном оформлении

## Описание классов

### Класс "GetDataFromApi"
Наследует класс Api, отвечает за получение данных с сервера, необходимых нам. 
**Реализует метод**
getData() - отправляет запрос на сервер и получает массив объектов (данных о товаре)


### Класс "Product"
Содержит в себе следующие **поля** карточки товара:
name - название товара. Тип string.
icon - иконку-изображение товара. Тип string.
category - принадлежность к категории товаров. Литеральный тип "сотф-скил" | "другое" | "дополнительное"| "кнопка" | "хард-скил"
cost - стоимость. Тип number.
displayedСost - отображаемая стоимость. Тип string. На странице товары должны отображаться с указанием единицы оплаты, поэтому требуется дополнительное поле. В конструкторе будет рассчитываться по условию: если равно 0, значение "бесценно", если значение больше нуля, то значение + " синапсов". (В макете нет стоимости менее 5 синапсов, иначе можно было бы ввести третью проверку, от 1 до 4 значение было бы: значение + " синапса").
description - описание товара. Тип string.

В **конструктор** при создании передаются данные от api

Класс реализует **метод**: 
getData() - возвращает данные, необходимые для отрисовки в каталоге или открытой карты товара (название, изображение, цена, категория)


### Класс "Catalog"
Отвечает за создание карточек всех товаров и их отрисовку

**Реализует методы**:
createAllProducts() - получает данные с api с массивом всех карточек, преобразует их в экземпляры класса Product.
renderCatalog() - используя все экземпляры класса Prodact, созданные методотом createAllProdacts(), отрисовывает их на странице при помощи template id="card-catalog"


### Класс "Modal"
**Имеет поля**:
closeButton - кнопка закрытия. Тип HTMLButtonElement
modalSelector - уникальный селектор модального окна, по которому ищется его кнопка закрытия. Тип string

**Имеет методы**:
openModal() - открывает модальное окно товара или корзины на главной странице
closeModal() - отвечает за закрытие модального окна при нажатии на кнопку закрытия и нажатии на оверлей


### Класс "ModalCardFull"
**Наследуется** от класса "Modal"
Переопределяет поле "modalSelector" как "card_full"

**Получает дополнительные поля**:
prodactName - заголовок. Тип string
productDescription - описание продукта. Тип string
prodactCategory  - категория товара. Литеральный тип "софт-скил" | "другое" | "дополнительное"| "кнопка" | "хард-скил"
cost - стоимость. Тип number.
displayedСost - отображаемая стоимость

В **конструктор** приходит экземпляр класса Product, который переносит в этот класс значение своих полей соотвественно

**Методы** (кроме тех, что наследуются)
renderModalCardFull() - отвечает за отрисовку данных в модальном окне. При отрисовке проверка - если товар есть в корзине, для кнопки устанавливается неактивное состояние
closeModal() - кроме родительских функций приобретает закрытие при нажатии на кнопку "закрытие" и вызывает открытие модального окна "корзина"


### Класс "Basket"
Наследуется от класса Modal
Переопределяет поле "modalSelector" как "basket"
**Имеет дополнительно поля**:
modalName - статичное поле, значение "Корзина"
inBasket - по умолчанию при инициализации значение = [], при добавлении товаров - множество объектов типа (name - Product.name, значение Product.dispayedCost)
sumInBasket - по умолчанию при инициализации значение = 0, при добавлении товара добавляется (сложением) стоимость нового товара. Тип number
displayedSumInBasket - отображаемая стоимость. Тип string. В корзине общая стоимость должна отображаться с указанием единицы оплаты, поэтому требуется дополнительное поле.

**Методы**:
setToBasket() - принимает название и цену товара, добавляет их в множество объектов inBasket, добавляет стоимость товара в sumInBasket, обновляет состояние поля displayedSumInBasket (если равно 0, значение "корзина пуста, положите что-нибудь сюда", если значение больше нуля, то значение + " синапсов". ) 

deleteFromBasket() - по нажатию кнопки удаления около товара - удаляет его, обновляет поля sumInBasket и displayedSumInBasket

renderBasket() - отвечает за отрисовку данных в модальном окне. Данные товаров отрисовывает в виде нумерованного списка присваивая им номера начиная с "1", размещает имя, цену и кнопку удаления товара. Отрисовавывает displayedSumInBasket

cleanBasket() - очищает корзину


### Класс "ModalOrder"
Наследуется от класса Modal
Переопределяет поле "modalSelector" как "order"

Этот класс будет иметь всего 2 экземпляра - один будет реализовывать форму "способ оплаты" и "адрес доставки", второй - "e-mail" и "телефон" соответственно

**Конструктор** принимает пары значений (название поля, тип поля) и сохраняет их в поля класса

**Методы**:
renderModalOrder() - отвечает за отрисовку попапа, его полей и кнопки
validateForm() - проводит валидацию формы по мере ввода, только если данные в формах валидны позволяет нажать кнопку
openNext() - при успешной валидации форм открывает следующую страницу при нажатии на кнопку. Принимает на вход данные валидации, ничего не возвращает, вызывает открытие следующего попапа (или следующего экземпляра класса, или сообщения об успешном оформлении заказа)

### Класс "ModalSuccess"
Наследуется от класса Modal
Переопределяет поле "modalSelector" как "order-success"

**Имеет свои поля**:
successIcon: тип string.
lastBuscetSum: тип string. В конструкторе превращает переданную последнюю сумму в корзины в строку "Списано ${сумма} синапсов"

**Имеет метод**:
renderSuccess() - открывает модальное окно, показывающее сообщение об успешном оформлении заказа, вносит данные в модальное окно для отрисовки. Вызывет cleanBasket() для корзины

## Ключевые типы данных
type Category = "софт-скил" | "другое" | "дополнительное"| "кнопка" | "хард-скил"

interface IProduct {
    name: string;
    icon: string;
    category: Category;
    cost: number;
    displayedСost: string;
}